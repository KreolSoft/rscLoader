//* rscLoader 0.02.63 | Copyright (c) 2014 Nikita "IgelHaut" Nitichevski | MIT License *//

!function(e,t){function r(){var e=t.getElementById("rscLoaderTarget");if(!e){var r=t.createElement("div");r.id="rscLoaderTarget",r.style.display="none",r.style.width="0",r.style.height="0",t.body.insertBefore(r,t.body.childNodes[0]),e=t.getElementById("rscLoaderTarget")}return e}var n={stylesheet:{type:["css"],createNode:function(e){var r=t.createElement("link");return r.href=e,r.type="text/css",r.rel="stylesheet",r},addListener:function(e,r){r.timer=function(){var e=this;setTimeout(function(){for(var r=0;r<t.styleSheets.length;r++)if(t.styleSheets[r].href==e.src){e.ready=!0,delete e.timer;break}e.ready||e.timer()},10)},r.timer()}},javascript:{type:["js"],createNode:function(e){var r=t.createElement("script");return r.src=e,r.async=!0,r.type="text/javascript",r},addListener:function(e,t){e.onload=function(){t.ready=!0},e.onreadystatechange=function(){"complete"==this.readyState&&(t.ready=!0)}}},image:{type:["png","bmp","svg","gif","jpg","jpeg"],createNode:function(e){var r=t.createElement("img");return r.src=e,r.style.display="none",r.style.width="0",r.style.height="0",r},addListener:function(e,t){e.onload=function(){t.ready=!0},e.onreadystatechange=function(){"complete"==this.readyState&&(t.ready=!0)}}}},s=function(){function e(){_timer=setTimeout(function(){for(var r=0;r<s.length;r++)s[r].callback(t.stats(s[r].type),t.resources);t.stats("all").ready<t.stats("all").overall&&e()},50)}var t=this;this.resources=[];var s=[];_timer=null,this.stats=function(e){for(var r={overall:0,ready:0,notready:0},n=0;n<t.resources.length;n++)("all"==e||e==t.resources[n].type)&&(r.overall++,t.resources[n].ready&&r.ready++,t.resources[n].ready||r.notready++);return r},this.load=function(s,a){if(!a||!n[a]){for(var i in n)if(-1!=n[i].type.indexOf(s.substr(s.lastIndexOf(".")+1))){a=i;break}if(!a)return}t.resources.push({type:a,src:s,ready:!1}),_timer||e();var o=n[a].createNode(s);return n[a].addListener(o,t.resources[t.resources.length-1]),setTimeout(function(){r().insertBefore(o)},0),t},this.listen=function(e,r){return s.push({type:e,callback:r}),t}};e.rscLoader=e._rscLoader=s}(window,document);
