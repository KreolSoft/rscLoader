//* rscLoader 0.02.64 | Copyright (c) 2014 Nikita "IgelHaut" Nitichevski | MIT License *//

!function(e,t){"use strict";function r(){var e=t.getElementById("rscLoaderTarget");if(!e){var r=t.createElement("div");r.id="rscLoaderTarget",r.style.display="none",r.style.width="0",r.style.height="0",t.body.insertBefore(r,t.body.childNodes[0]),e=t.getElementById("rscLoaderTarget")}return e}var s={stylesheet:{type:["css"],createNode:function(e){var r=t.createElement("link");return r.href=e,r.type="text/css",r.rel="stylesheet",r},addListener:function(r,s){s.timer=function(){var r=this;e.setTimeout(function(){for(var e=0;e<t.styleSheets.length;e++)if(t.styleSheets[e].href==r.src){r.ready=!0,delete r.timer;break}r.ready||r.timer()},10)},s.timer()}},javascript:{type:["js"],createNode:function(e){var r=t.createElement("script");return r.src=e,r.async=!0,r.type="text/javascript",r},addListener:function(e,t){e.onload=function(){t.ready=!0},e.onreadystatechange=function(){"complete"==this.readyState&&(t.ready=!0)}}},image:{type:["png","bmp","svg","gif","jpg","jpeg"],createNode:function(e){var r=t.createElement("img");return r.src=e,r.style.display="none",r.style.width="0",r.style.height="0",r},addListener:function(e,t){e.onload=function(){t.ready=!0},e.onreadystatechange=function(){"complete"==this.readyState&&(t.ready=!0)}}}},n=function(){function t(){o=e.setTimeout(function(){for(var e=0;e<a.length;e++)a[e].callback(n.stats(a[e].type),n.resources);n.stats("all").ready<n.stats("all").overall&&t()},50)}var n=this;this.resources=[];var a=[],o=null;this.stats=function(e){for(var t={overall:0,ready:0,notready:0},r=0;r<n.resources.length;r++)("all"==e||e==n.resources[r].type)&&(t.overall++,n.resources[r].ready&&t.ready++,n.resources[r].ready||t.notready++);return t},this.load=function(e,a){if(!a||!s[a]){for(var i in s)if(-1!=s[i].type.indexOf(e.substr(e.lastIndexOf(".")+1))){a=i;break}if(!a)return}n.resources.push({type:a,src:e,ready:!1}),o||t();var c=s[a].createNode(e);return s[a].addListener(c,n.resources[n.resources.length-1]),setTimeout(function(){r().insertBefore(c)},0),n},this.listen=function(e,t){return a.push({type:e,callback:t}),n}};e.rscLoader=e._rscLoader=n}(window,document);
