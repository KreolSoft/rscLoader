//* rscLoader 0.02.77 | Copyright (c) 2014 Nikita "IgelHaut" Nitichevski | MIT License *//

!function(e,t){"use strict";function r(){var e=t.getElementById("rscLoaderTarget");if(!e){var r=t.createElement("div");r.id="rscLoaderTarget",r.style.display="none",r.style.width="0",r.style.height="0",t.body.insertBefore(r,t.body.childNodes[0]),e=t.getElementById("rscLoaderTarget")}return e}function n(e,t){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1}var s={stylesheet:{type:["css"],createNode:function(e){var r=t.createElement("link");return r.href=e,r.type="text/css",r.rel="stylesheet",r},addListener:function(r,n){n.timer=function(){var r=this;e.setTimeout(function(){for(var e=0;e<t.styleSheets.length;e++)if(t.styleSheets[e].href==r.src){r.ready=!0,delete r.timer;break}r.ready||r.timer()},10)},n.timer()}},javascript:{type:["js"],createNode:function(e){var r=t.createElement("script");return r.src=e,r.async=!0,r.type="text/javascript",r},addListener:function(e,t){e.onload=function(){t.ready=!0},e.onreadystatechange=function(){"complete"==this.readyState&&(t.ready=!0)}}},image:{type:["png","bmp","svg","gif","jpg","jpeg"],createNode:function(e){var r=t.createElement("img");return r.src=e,r.style.display="none",r.style.width="0",r.style.height="0",r},addListener:function(e,t){e.onload=function(){t.ready=!0},e.onreadystatechange=function(){"complete"==this.readyState&&(t.ready=!0)}}}},a=function(){function t(){c=e.setTimeout(function(){for(var r=0;r<i.length;r++)i[r].callback(o.stats(i[r].type),o.resources);o.stats("all").ready<o.stats("all").overall?t():(e.clearTimeout(c),e.clearTimeout(u))},50)}function a(){u=e.setTimeout(function(){for(var e=0;e<o.resources.length;e++)o.resources[e].ready=!0},18e4)}var o=this;this.resources=[];var i=[],c=null,u=null;this.stats=function(e){for(var t={overall:0,ready:0,notready:0},r=0;r<o.resources.length;r++)("all"==e||e==o.resources[r].type)&&(t.overall++,o.resources[r].ready&&t.ready++,o.resources[r].ready||t.notready++);return t},this.load=function(e,i){if(!i||!s[i]){for(var u in s)if(n(e.substr(e.lastIndexOf(".")+1),s[u].type)){i=u;break}if(!i)return}o.resources.push({type:i,src:e,ready:!1}),c||(t(),a());var l=s[i].createNode(e);return s[i].addListener(l,o.resources[o.resources.length-1]),setTimeout(function(){r().insertBefore(l)},0),o},this.listen=function(e,t){return i.push({type:e,callback:t}),o}};e.rscLoader=e._rscLoader=a}(window,document);
