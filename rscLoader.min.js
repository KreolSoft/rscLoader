//* rscLoader 0.01.06 | Copyright (c) 2014 Nikita "IgelHaut" Nitichevski | MIT License *//

!function(e,r){function s(){try{var e=i;e.timer=setTimeout(function(){for(var r in e.listener)for(var t=0;t<e.listener[r].length;t++)e.listener[r][t].call(e,e.stats(r),"all"==r?e.resources:e.resources[r]);e.stats("all").loaded<e.stats("all").overall&&s()},50)}catch(r){console.error(r)}}function t(e,s,t){try{var o=r.getElementById("rscLoaderTarget");if(!o){var n=r.createElement("div");n.id="rscLoaderTarget",n.style.display="none",n.style.width="0px",n.style.height="0px",r.body.insertBefore(n,r.body.childNodes[0]),o=r.getElementById("rscLoaderTarget")}if("css"==e){var c=r.createElement("link");c.href=s,c.type="text/css",c.rel="stylesheet"}else if("js"==e){var c=r.createElement("script");c.src=s,c.type="text/javascript"}else if("img"==e){var c=r.createElement("img");c.src=s,c.style.display="none"}c.onload=function(){for(var r=0;r<i.resources[e].length;r++)i.resources[e][r].src==s&&(i.resources[e][r].loaded=!0)},c.onreadystatechange=function(){if("complete"==this.readyState)for(var r=0;r<i.resources[e].length;r++)i.resources[e][r].src==s&&(i.resources[e][r].loaded=!0)},(t||o).appendChild(c)}catch(a){console.error(a)}}var o=function(){},i={};o.prototype=i,i.timer=null,i.resources={css:[],js:[],img:[]},i.listener={css:[],js:[],img:[],all:[]},i.stats=function(e){try{if(-1==["css","js","img","all"].indexOf(e))throw"rscLoader error: Invalid resource type given.";var r=0,s=0,t=0;for(var o in this.resources)if("all"==e||o==e)for(var i=0;i<this.resources[o].length;i++)r++,this.resources[o][i].loaded||t++,this.resources[o][i].loaded&&s++;return{overall:r,loaded:s,notloaded:t}}catch(n){console.error(n)}},i.load=function(e,r){try{if(!e)throw"rscLoader error: Resource not given.";if(r||(r=e.substr(e.lastIndexOf(".")+1)),-1!=["png","bmp","svg","gif","jpg","jpeg"].indexOf(r)&&(r="img"),-1==["css","js","img"].indexOf(r))throw"rscLoader error: Invalid resource type given.";return this.resources[r].push({src:e,loaded:!1}),this.timer||s(),t(r,e),this}catch(o){console.error(o)}},i.listen=function(e,r){try{if(-1==["css","js","img","all"].indexOf(e))throw"rscLoader error: Invalid resource type given.";if(!r||"function"!=typeof r)throw"rscLoader error: Invalid callback given.";return this.listener[e].push(r),this}catch(s){console.error(s)}},e.rscLoader=new o}(window,document);
