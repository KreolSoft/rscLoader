//* rscLoader 0.01.53 | Copyright (c) 2014 Nikita "IgelHaut" Nitichevski | MIT License *//

!function(e,r){var s=function(){function e(){try{t.timer=setTimeout(function(){for(var r in t.listener)for(var s=0;s<t.listener[r].length;s++)t.listener[r][s].call(t,t.stats(r),"all"==r?t.resources:t.resources[r]);t.stats("all").loaded<t.stats("all").overall&&e()},50)}catch(r){console.error(r)}}function s(e,s,o){try{var i=r.getElementById("rscLoaderTarget");if(!i){var c=r.createElement("div");c.id="rscLoaderTarget",c.style.display="none",c.style.width="0px",c.style.height="0px",r.body.insertBefore(c,r.body.childNodes[0]),i=r.getElementById("rscLoaderTarget")}if("css"==e){var n=r.createElement("link");n.href=s,n.type="text/css",n.rel="stylesheet"}else if("js"==e){var n=r.createElement("script");n.src=s,n.type="text/javascript"}else if("img"==e){var n=r.createElement("img");n.src=s,n.style.display="none"}n.onload=function(){for(var r=0;r<t.resources[e].length;r++)t.resources[e][r].src==s&&(t.resources[e][r].loaded=!0)},n.onreadystatechange=function(){if("complete"==this.readyState)for(var r=0;r<t.resources[e].length;r++)t.resources[e][r].src==s&&(t.resources[e][r].loaded=!0)},(o||i).appendChild(n)}catch(a){console.error(a)}}var t=this;this.timer=null,this.resources={css:[],js:[],img:[]},this.listener={css:[],js:[],img:[],all:[]},this.stats=function(e){try{if(-1==["css","js","img","all"].indexOf(e))throw"rscLoader error: Invalid resource type given.";var r=0,s=0,t=0;for(var o in this.resources)if("all"==e||o==e)for(var i=0;i<this.resources[o].length;i++)r++,this.resources[o][i].loaded||t++,this.resources[o][i].loaded&&s++;return{overall:r,loaded:s,notloaded:t}}catch(c){console.error(c)}},this.load=function(r,t){try{if(!r)throw"rscLoader error: Resource not given.";if(t||(t=r.substr(r.lastIndexOf(".")+1)),-1!=["png","bmp","svg","gif","jpg","jpeg"].indexOf(t)&&(t="img"),-1==["css","js","img"].indexOf(t))throw"rscLoader error: Invalid resource type given.";return this.resources[t].push({src:r,loaded:!1}),this.timer||e(),s(t,r),this}catch(o){console.error(o)}},this.listen=function(e,r){try{if(-1==["css","js","img","all"].indexOf(e))throw"rscLoader error: Invalid resource type given.";if(!r||"function"!=typeof r)throw"rscLoader error: Invalid callback given.";return this.listener[e].push(r),this}catch(s){console.error(s)}}};e.rscLoader=s}(window,document);
